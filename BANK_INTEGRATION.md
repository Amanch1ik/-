# üè¶ –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ø–ª–∞—Ç–µ–∂–Ω–æ–≥–æ —à–ª—é–∑–∞

## 1. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 1.1 –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
- **Frontend**: React Native –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- **Backend**: Python FastAPI
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQLite
- **–ü–ª–∞—Ç–µ–∂–Ω—ã–π —à–ª—é–∑**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–Ω–∫–∞–º–∏ –ö–†

## 2. –ú–µ—Ö–∞–Ω–∏–∑–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### 2.1 –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- JWT —Ç–æ–∫–µ–Ω—ã
- –î–≤—É—Ö—Ñ–∞–∫—Ç–æ—Ä–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö AES-256

### 2.2 –ó–∞—â–∏—Ç–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```python
class TransactionSecurity:
    @staticmethod
    def generate_transaction_id(user_id):
        """
        –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
        - –í–∫–ª—é—á–∞–µ—Ç user_id
        - –ú–µ—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
        - –°–ª—É—á–∞–π–Ω—ã–π salt
        """
        timestamp = int(datetime.now().timestamp())
        salt = secrets.token_hex(4)
        return f"YESS_{user_id}_{timestamp}_{salt}"
    
    @staticmethod
    def validate_transaction(transaction):
        """
        –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏:
        - –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
        - –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª–∏–º–∏—Ç–∞–º
        - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
        """
        checks = [
            transaction.validate_signature(),
            transaction.check_amount_limits(),
            transaction.verify_user_source()
        ]
        return all(checks)
```

## 3. API Endpoints –¥–ª—è –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

### 3.1 –°–æ–∑–¥–∞–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
`POST /api/v1/transactions/create`
```json
{
    "user_id": "string",
    "amount": "decimal",
    "bank_code": "string",
    "transaction_type": "replenish|payment",
    "metadata": {
        "device_id": "string",
        "ip_address": "string",
        "geolocation": {
            "lat": "float",
            "lon": "float"
        }
    }
}
```

### 3.2 –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
`POST /api/v1/transactions/confirm`
```json
{
    "transaction_id": "string",
    "bank_confirmation_code": "string",
    "signature": "string"
}
```

## 4. Webhook –æ—Ç –±–∞–Ω–∫–∞

### 4.1 –í—Ö–æ–¥—è—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```json
{
    "transaction_id": "YESS_USER123_1623456789_a1b2c3",
    "status": "success|failed",
    "amount": "decimal",
    "timestamp": "iso8601_datetime"
}
```

## 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### 5.1 –ö–æ–¥—ã –æ—à–∏–±–æ–∫
- `YESS_TRANS_001`: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤
- `YESS_TRANS_002`: –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- `YESS_TRANS_003`: –ù–µ–≤–µ—Ä–Ω—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã
- `YESS_TRANS_004`: –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –±–∞–Ω–∫–∞

## 6. –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ HTTPS
- –ë–µ–ª—ã–π —Å–ø–∏—Å–æ–∫ IP –¥–ª—è API
- –†–æ—Ç–∞—Ü–∏—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–π
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

## 7. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 7.1 –¢–µ—Å—Ç–æ–≤—ã–π —Å—Ç–µ–Ω–¥
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç—É—Ä
- –¢–µ—Å—Ç–æ–≤—ã–µ —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- –°–∏–º—É–ª—è—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### 7.2 –°—Ü–µ–Ω–∞—Ä–∏–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- –£—Å–ø–µ—à–Ω–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —Å –æ—à–∏–±–∫–æ–π
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–æ–≤
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
